#!/bin/rc

pkgfile=$1

if(~ $pkgfile '') {
	echo Usage: pkginstall [pkgfile]
	exit no_pkgname
}

tmpcache=/tmp/pkg/

if(! test -f $pkgfile) {
	echo $pkgfile does not exist.
	echo Usage: pkginstall [pkgfile]
	echo Example: pkginstall `{pkgfind git9}
	exit no_pkg
}
pkgname=`{echo $pkgfile | sed 's|.*/(.+)-([a-zA-Z0-9]+_[0-9]+).pkg|\1|g'}
#echo PKGNAME: $pkgname
#exit

mkdir -p $tmpcache/$pkgname
@{ cd $tmpcache/$pkgname && tar -xvzf $pkgfile }

fn sigexit {
	rm -r $tmpcache/$pkgname
}

cat $tmpcache/$pkgname/meta
cat $tmpcache/$pkgname/manifest
